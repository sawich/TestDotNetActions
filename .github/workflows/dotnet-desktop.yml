name: ".NET"

on:
  push:
    branches: ["main"]
  pull_request:
    branches: ["main"]

jobs:
  build:
    runs-on: "ubuntu-latest"

    steps:
      - uses: "actions/checkout@latest"

      - name: "Setup .NET"
        uses: "actions/setup-dotnet@latest"
        with:
          dotnet-version: "6.0.x"

      - name: "Restore dependencies"
        run: "dotnet restore"

      - name: "Publish"
        run: "dotnet publish --no-restore --nolog -c Release"

      - uses: "marvinpinto/action-automatic-releases@latest"
        with:
          repo_token: "${{ secrets.GITHUB_TOKEN }}"
          automatic_release_tag: "latest"
          prerelease: true
          title: "Development Build"
          files: "ConsoleApp1\\bin\\Release\\net6.0\\publish"
